<ion-header>
    <ion-navbar>
        <ion-title>房源搜索</ion-title>
    </ion-navbar>

    <ion-toolbar>
        <!--<div class="searchs">-->
        <!--<ion-searchbar
  [(ngModel)]="myInput"
  [showCancelButton]="shouldShowCancel"
  (ionInput)="onInput($event)"
  (ionCancel)="onCancel($event)">
</ion-searchbar>-->
        <!--<div class="item-input-wrapper">
                <i class="icon placeholder-icon"><img src="assets/img/staff/search.png"></i>
                <input (ngModelChange)="searchDis($event)" [(ngModel)]="searchData.input" type="search" style="padding-top:0;"
                    placeholder="请输入区域、商圈或小区名搜索" />
                <button ion-botton (click)='clearInput()' *ngIf="searchData.input !==''">
					<img src="assets/img/sprite/close_btn_home.png" width="18"/>
				</button>
            </div>
            <button ion-button class="inputsub" (click)='inputSearch()'>搜索</button>
        </div>-->
        <div class="searchs">
            <div class="item-input-wrapper">
                <i class="icon placeholder-icon"><img src="assets/img/staff/search.png"></i>
                <input [(ngModel)]="searchData.input" (ngModelChange)="searchDis($event)" type="search" style="padding-top:0;" placeholder="请输入区域、商圈或小区名搜索"
                />
                <button ion-botton (click)='clearInput()' *ngIf="searchData.input !==''">
					<img src="assets/img/sprite/close_btn_home.png" width="18"/>
				</button>
            </div>
            <button ion-button class="inputsub" (click)='inputSearch()'>搜索</button>
        </div>
        <div class="record-title">
            <div class="titles" (click)='chooseAreaTab()'>
                <span [ngClass]="{'positive': activeAreaTab}">{{subtabs.activeArea}}</span>
                <ion-icon name="{{activeAreaTab ? 'md-arrow-dropdown' : 'md-arrow-dropup'}}"></ion-icon>
            </div>
            <div class="titles" (click)='choosePriceTab()'>
                <span [ngClass]="{'positive': activePriceTab}">{{subtabs.activePrice}}</span>
                <ion-icon name="{{activePriceTab ? 'md-arrow-dropdown' : 'md-arrow-dropup'}}"></ion-icon>
            </div>
            <div class="titles" (click)='chooseHouseTypeTab()'>
                <span [ngClass]="{'positive': activeHouseTypeTab}">{{subtabs.activeHouse}}</span>
                <ion-icon name="{{activeHouseTypeTab ? 'md-arrow-dropdown' : 'md-arrow-dropup'}}"></ion-icon>
            </div>
            <div class="titles" (click)='chooseMoreTab()'>
                <span [ngClass]="{'positive': activeMoreTab}">{{subtabs.activeMore}}</span>
                <ion-icon name="{{activeMoreTab ? 'md-arrow-dropdown' : 'md-arrow-dropup'}}"></ion-icon>
            </div>
        </div>
        <div *ngIf="inputStart" class='search-dropdown'>
            <a *ngIf="districtsTotal == 0" ion-button full outline style="color:blue;">没有匹配</a>
            <button ion-button full outline *ngFor="let d of districts" (click)="chooseDis(d)">{{d.subdistrict.name}}</button>
        </div>
        <!--<div class="record-title">
            <div class="titles" *ngFor="let i of subtabs" (click)="chooseTab(i)">
                <span [ngClass]="{'positive': choosedTab == i.id}">{{i.title}}</span>
                <ion-icon name="{{choosedTab == i.id ? 'md-arrow-dropdown' : 'md-arrow-dropup'}}"></ion-icon>
            </div>
        </div>-->
    </ion-toolbar>
    <ion-scroll scrollX="true" scrollY="true" class="content-list" *ngIf='activeAreaTab'>
        <div class='area-content'>
            <!--区域-->
            <div class='block'>
                <button ion-button full outline *ngFor='let a of areatabs' (click)='chooseAreatab(a)' [ngClass]='choosedAreatab == a ? "button-positive":""'>{{a}}</button>
            </div>
            <div class='block'>
                <div ng-if='choosedAreatab == "区域"'>
                    <button ion-button full outline *ngFor='let p of regions' (click)='chooseRegion(p)' [ngClass]='choosedRegion == p ? "button-positive":""'>{{p.name}}</button>
                </div>
            </div>
            <div class='block'>

            </div>
        </div>
        <div class="shadow-top" (click)='chooseAreaTab()'></div>
    </ion-scroll>
    <ion-scroll scrollX="true" scrollY="true" class="content-list" *ngIf='activePriceTab'>
        <div class='house-list'>
            <!--价格-->
            <div class="list">
                <button ion-button full outline *ngFor='let p of prices' (click)='choosePrice(p)' [ngClass]='choosedPrice == p ? "choosed":""'>{{p.name}}</button>
            </div>
        </div>
        <div class="shadow-top" (click)='choosePriceTab()'></div>
    </ion-scroll>
    <ion-scroll scrollX="true" scrollY="true" class="content-list" *ngIf='activeHouseTypeTab'>
        <div class='house-list'>
            <!--户型-->
            <div class="list">
                <button ion-button full outline *ngFor='let p of houseTypes' (click)='chooseHouseType(p)' [ngClass]='choosedHouseType == p ? "choosed":""'>{{p.name}}</button>
            </div>
        </div>
        <div class="shadow-top" (click)='chooseHouseTypeTab()'></div>
    </ion-scroll>
    <ion-scroll scrollX="true" scrollY="true" class="content-list" *ngIf='activeMoreTab'>
        <div class='housemore'>
            <!--更多-->
            <div class="more-list">
                <div class='item'>
                    <h5>朝向</h5>
                    <div class="flex-row">
                        <button ion-button *ngFor='let p of orientations' (click)='chooseOrientation(p)' [ngClass]='choosedOrientation == p ? "main-color":""'>{{p.name}}</button>
                    </div>
                </div>
                <div class='item'>
                    <h5>面积</h5>
                    <div class="flex-row">
                        <button ion-button *ngFor='let p of buildingAreas' (click)='chooseBuildingArea(p)' [ngClass]='choosedBuildingArea == p ? "main-color":""'>{{p.name}}</button>
                    </div>
                </div>
                <div class='item'>
                    <h5>楼龄</h5>
                    <div class="flex-row">
                        <button ion-button *ngFor='let p of buildYears' (click)='chooseBuildYear(p)' [ngClass]='chooseduildYear == p ? "main-color":""'>{{p.name}}</button>
                    </div>
                </div>
                <div class='item'>
                    <h5>状态</h5>
                    <div class="flex-row">
                        <button ion-button *ngFor='let p of chooseStatus' (click)='chooseBuildStatus(p)' [ngClass]='chooseduildStatus == p ? "main-color":""'>{{p.name}}</button>
                    </div>
                </div>
            </div>
            <div class='item'>
                <button ion-button outline class="button button-clear" (click)='clearMore()'>清空条件</button>
                <a ion-button round (click)='endMore()'>确定</a>
            </div>
        </div>
        <div class="shadow-top" (click)='chooseMoreTab()'></div>
    </ion-scroll>
</ion-header>
<ion-content>
    <div class="housesearch" *ngFor="let h of houses">

        <ion-item (click)="goDetail(h)">
            <img *ngIf="h.images !== '[]'" src="{{(h.images | ImgPipe)[0]}}" width='70' height='70' style="float: left;" />
            <img *ngIf="h.images == '[]'" src="assets/img/img_null.png" width='70' height='70' style="float: left;" />
            <a class="house-right">
                <div class="flex-row">
                    <p>
                        <i *ngIf="he !== 0">合</i>
                        <span style="font-weight:700;">{{h.subdistrict.name}}</span>
                    </p>
                    <p>
                        {{h.detailAddr}}
                    </p>
                </div>
                <div>
                    <span class="text">{{h.houseType}}&nbsp;/&nbsp;</span>
                    <span class="text">{{h.buildingArea}}m<sup>2</sup>&nbsp;/&nbsp;</span>
                    <span class="text" *ngIf="h.orientation == 1">西&nbsp;/&nbsp;</span>
                    <span class="text" *ngIf="h.orientation == 2">东&nbsp;/&nbsp;</span>
                    <span class="text" *ngIf="h.orientation == 3">北&nbsp;/&nbsp;</span>
                    <span class="text" *ngIf="h.orientation == 4">南&nbsp;/&nbsp;</span>
                    <span class="text" *ngIf="h.orientation == 5">南北&nbsp;/&nbsp;</span>
                    <span class="text" *ngIf="h.decorate == 1">毛坯</span>
                    <span class="text" *ngIf="h.decorate == 2">简装</span>
                    <span class="text" *ngIf="h.decorate == 3">精装</span>
                </div>
                <div>
                    <span class="positive" *ngIf="h.status == 0">初始状态</span>
                    <span class="positive" *ngIf="h.status == 1">实勘中</span>
                    <span class="positive" *ngIf="h.status == 2">已上架</span>
                    <span class="positive" *ngIf="h.status == 3">已下架</span>
                    <span class="positive" *ngIf="h.status == 4">已锁定</span>
                    <span class="positive" *ngIf="h.status == 5">已销售</span>
                    <strong class="price assertive">{{h.price}}万</strong>
                </div>
            </a>
        </ion-item>
        <house [h]='h'></house>
        <!--<ion-item>
            <img *ngIf="h.images !== '[]'" src="{{h.images[0]}}" width='70' height='70' />
            <img *ngIf="h.images == '[]'" src="assets/img/img_null.png" width='70' height='70' />
            <a class="house-right">
                <div class="flex-row">
                    <p>
                        <i *ngIf="h.hkIds !== 0">合</i>
                        <span style="font-weight:700;">{{h.subdistrict.name}}</span>
                    </p>
                    <p>
                        {{h.detailAddr}}
                    </p>
                </div>
                <div>
                    <span class="text">{{h.houseType}}&nbsp;/&nbsp;</span>
                    <span class="text">{{h.buildingArea}}m<sup>2</sup>&nbsp;/&nbsp;</span>
                    <span class="text" *ngIf="h.orientation == 1">西&nbsp;/&nbsp;</span>
                    <span class="text" *ngIf="h.orientation == 2">东&nbsp;/&nbsp;</span>
                    <span class="text" *ngIf="h.orientation == 3">北&nbsp;/&nbsp;</span>
                    <span class="text" *ngIf="h.orientation == 4">南&nbsp;/&nbsp;</span>
                    <span class="text" *ngIf="h.orientation == 5">南北&nbsp;/&nbsp;</span>
                    <span class="text" *ngIf="h.decorate == 1">毛坯</span>
                    <span class="text" *ngIf="h.decorate == 2">简装</span>
                    <span class="text" *ngIf="h.decorate == 3">精装</span>
                </div>
                <div>
                    <span class="positive" *ngIf="h.status == 0">初始状态</span>
                    <span class="positive" *ngIf="h.status == 1">实勘中</span>
                    <span class="positive" *ngIf="h.status == 2">已上架</span>
                    <span class="positive" *ngIf="h.status == 3">已下架</span>
                    <span class="positive" *ngIf="h.status == 4">已锁定</span>
                    <span class="positive" *ngIf="h.status == 5">已销售</span>
                    <strong class="price assertive">{{h.price}}万</strong>
                </div>
            </a>
        </ion-item>
        <div class="handle">
            <div>
                <a *ngIf="h.hkId != 0" href="tel:{{h.hkName.mobile}}"><img src="assets/img/staff/phone_line_btn.png" width="20" /></a>
                <p>
                    房管家：
                    <span *ngIf="h.hkId != 0">
						{{h.hkName.name}}
					</span>
                    <span *ngIf="h.hkId == 0" style="color:#265fdf;">无</span>
                </p>
                <p>{{h.hkName.mobile}}</p>
            </div>
            <span class="spacing"></span>
            <div>
                <a *ngIf="h.referrerId" href="tel:{{h.referrerName.mobile}}"><img src="assets/img/staff/phone_line_btn.png" width="20" /></a>
                <p>
                    推荐人<span style="font-size:.8em;color:#999;" *ngIf="h.referrerId > 5000000">(业主)</span>：
                    <span *ngIf="h.referrerId">
						{{h.referrerName.name}}
					</span>
                    <span *ngIf="!h.referrerId" style="color:#265fdf;">无</span>
                </p>
                <p>{{h.referrerName.mobile}}</p>
            </div>
        </div>-->
    </div>
    <div *ngIf="housesTotal == 0" class="prompt">
        <ion-icon name="home"></ion-icon>
        <p>您还没有房源</p>
    </div>
    <div *ngIf="dataLength==0" class="doInfinite">
        <h5>只有这么多房源了</h5>
        <div></div>
    </div>
    <div *ngIf="dataLength == 0 && addMore == true" style="padding:10px;">
        <h5 style="text-align: center;color: #666">没有了!</h5>
    </div>
    <ion-infinite-scroll *ngIf="dataLength !== 0 && addMore == true" (ionInfinite)="doInfinite($event)">
        <ion-infinite-scroll-content loadingText="正在加载中..."></ion-infinite-scroll-content>
    </ion-infinite-scroll>
</ion-content>